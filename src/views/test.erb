<!DOCTYPE html>
<html>
<head>
  <title>codeQuest</title>
  <link rel="stylesheet" type="text/css" href="<%=url('test.css')%>">
  <link rel="icon" type="image/png" href="/favicon2.png">
</head>
<% if @theme == 'light' %>
  <style>@import url('color-scheme-light.css');</style>
<% else %>
  <style>@import url('color-scheme-dark.css');</style>
<% end %>
<body>
  <header class="container">
    <a href='/home'>
      <h1 class="logo">
        <img src="/favicon2.png" alt="Logo">
        <span>codeQuest</span>
      </h1>
    </a>
    <nav class="nav-links">
      <ul>
        <li><a href="/home" class="nav-link">Inicio</a></li>
        <li><a href="/profile" class="nav-link">Perfil</a></li>
        <li><a href="/snippets" class="nav-link">Snippets</a></li>
      </ul>
    </nav>
  </header>

  <div class="rectangle">
    <div class="question">
      <strong><%= @question.description %></strong>
    </div>
  </div>

  <% @options.each do |option| %>
    <div class="option-button" onclick="handleButtonClick('button<%= option.id %>')">
      <b><%= option.description %></b>
    </div>
  <% end %>

  <div class="additional-button" id="additionalButton">
    <b>Responder</b>
  </div>

  <% if @question.number < 3 %>
  <div id="nextQuestion" class="next-question-button">
    <% next_question_number = @question.number + 1 %>
    <a href="/test/<%= @test.letter %>/<%= next_question_number %>"><button type="button" class="continue-button">Siguiente Pregunta</button></a>
  </div>
  <% end %>

  <script>
  const additionalButton = document.getElementById('additionalButton');
  const optionButtons = document.querySelectorAll('.option-button');
  const nextQuestion = document.getElementById('nextQuestion');

  optionButtons.forEach(function(button) {
    button.addEventListener('click', function() {
      additionalButton.classList.remove('active', 'additional-button-animation');
      setTimeout(function() {
        additionalButton.classList.add('active', 'additional-button-animation');
      }, 10);
    });
  });

  additionalButton.addEventListener('click', function() {
    additionalButton.classList.toggle('active');
    nextQuestion.classList.toggle('active');
  });
</script>
</body>
</html>