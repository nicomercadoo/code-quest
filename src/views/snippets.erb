<!DOCTYPE html>
<html>
<head>
  <title>codeQuest</title>
  <link rel="stylesheet" type="text/css" href="<%=url('snippets.css')%>">
  <link rel="icon" type="image/png" href="/favicon2.png">
</head>
<% if @theme == 'light' %>
  <style>@import url('color-scheme-light.css');</style>
<% else %>
  <style>@import url('color-scheme-dark.css');</style>
<% end %>
<body>
  <header class="container">
   <a href='/home'>
      <h1 class="logo">
        <img src="favicon2.png" alt="Logo">
        <span>codeQuest</span>
      </h1>
    </a>
    <nav class="nav-links">
      <ul>
        <li><a href="/home" class="nav-link">Inicio</a></li>
        <li><a href="/profile" class="nav-link">Perfil</a></li>
        <li><a href="/snippets" class="current-page">Snippets</a></li>
        <li><a href="/" class="nav-link">Salir</a></li>
      </ul>
    </nav>
  </header>
 <button class="new-snippet-button" onclick="showInput()">Crear snippet</button>
  <div id="inputContainer">
    <div class="title-field">
      <input type="text" placeholder="Titulo del snippet" />
    </div>
    <div class="button-container">
      <button class="save-button">Guardar</button>
    </div>
  </div>
  <script>
    function showInput() {
      const inputContainer = document.getElementById('inputContainer');
      const titleField = document.querySelector('.title-field');
      const inputElement = inputContainer.querySelector('.input-field');
      const buttonContainer = document.querySelector('.button-container');

      if (inputElement) {
        inputContainer.removeChild(inputElement);
        titleField.classList.remove('show');
        buttonContainer.classList.remove('show'); 
      } else {
        // Input box doesn't exist, create and append it
        const newInputElement = document.createElement('div');
        newInputElement.classList.add('input-field');
        newInputElement.innerHTML = `
          <div class="line-count" id="lineCount">1</div>
          <textarea class="text-area" id="textInput" placeholder="Ingresa tu snippet" oninput="updateLineCount()"></textarea>
        `;
        inputContainer.appendChild(newInputElement);
        titleField.classList.add('show');
        buttonContainer.classList.add('show'); 
      }
    }

    function updateLineCount() {
      const textarea = document.getElementById('textInput');
      const lineCount = document.getElementById('lineCount');
      const lines = textarea.value.split('\n');
      let lineNumbers = '';

      for (let i = 0; i < lines.length; i++) {
        lineNumbers += (i + 1) + ' \n';
      }

      lineCount.textContent = lineNumbers;
    }
  </script>
</body>
</html>
